{% extends "stripey/_layouts/cp" %}
{% set title = "Product Types"|t %}

{% set crumbs = [
{ label: "Stripey"|t, url: url('stripey') },
{ label: "Settings"|t, url: url('stripey/settings') },
{ label: "Product Types"|t, url: url('stripey/settings/optiontypes') },
] %}

{% set tabs = {
dashboard: { label: "Dashboard"|t, url: url('stripey') },
products: { label: "Products"|t, url: url('stripey/products') },
charges: { label: "Charges"|t, url: url('stripey/charges') },
plans: { label: "Plans"|t, url: url('stripey/plans') },
settings: { label: "Settings"|t, url: url('stripey/settings') }
} %}



{% set selectedTab = 'settings' %}
{% import "_includes/forms" as forms %}

{% set content %}
<form method="post" accept-charset="UTF-8" data-saveshortcut>
    <input type="hidden" name="action" value="stripey/optionType/saveOptionType">
    <input type="hidden" name="redirect" value="stripey/settings/optiontypes">

    {{ getCsrfInput() }}
    {% if optionType.id %}<input type="hidden" name="optionTypeId" value="{{ optionType.id }}">{% endif %}

    {{ forms.textField({
        first: true,
        label: "Name"|t,
        instructions: "What this option type will be called."|t,
        id: 'name',
        name: 'name',
        value: optionType.name,
        errors: optionType.getErrors('name'),
        autofocus: true,
        required: true,
        translatable: true
    }) }}

    {{ forms.textField({
        label: "Handle"|t,
        instructions: "How youâ€™ll refer to this option type in code or templates."|t,
        id: 'handle',
        class: 'code',
        name: 'handle',
        value: optionType.handle,
        errors: optionType.getErrors('handle'),
        required: true
    }) }}

    <hr>

    <div class="field" id="optiontypes-field">
        <div class="heading">
            <label for="types-Table-defaults">Option Values</label>
            <div class="instructions"><p>Define the values for this Option Type.</p>
            </div>
        </div>
        <div class="input">
            <table id="types-Table-defaults" class="editable shadow-box">
                <thead>
                <tr>
                    <th scope="col" class="header">Display Name</th>
                    <th scope="col" class="header">Name</th><th class="header" colspan="2"></th>
                </tr>
                </thead>
                <tbody>
                <tr data-id="row1">
                    <td class="textual " width="">
                        <textarea style="min-height: 30px;" name="types[Table][defaults][row1][col1]" rows="1"></textarea>
                    </td><td class="textual " width="">
                        <textarea style="min-height: 30px;" name="types[Table][defaults][row1][col2]" rows="1"></textarea>
                    </td>
                    <td class="thin action"><a class="delete icon" title="Delete"></a>
                    </td>
                </tr>
                </tbody></table>
            <div tabindex="0" class="btn add icon">Add a value</div>
        </div>
    </div>



    <div class="buttons">
        <input type="submit" class="btn submit" value="{{ 'Save'|t }}">
    </div>
</form>

{% endset %}

{% set js %}
{% if not optionType.handle %}new Craft.HandleGenerator('#name', '#handle');{% endif %}
{% endset %}
{% includeJs js %}