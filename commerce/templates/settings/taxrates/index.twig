{% extends "commerce/_layouts/settings" %}

{% set content %}

    <h2>{{ "Tax Rates"|t }}</h2>

    {% if taxRates|length %}
    <table id="taxRates" class="data fullwidth collapsible">
        <thead>
        <tr>
            <th scope="col">{{ 'Name'|t }}</th>
            <th scope="col">{{ 'Rate'|t }}</th>
            <th scope="col">{{ 'Include in Price?'|t }}</th>
            <th scope="col">{{ 'Show in Label?'|t }}</th>
            <th scope="col">{{ 'Tax Zone'|t }}</th>
            <th scope="col">{{ 'Tax Category'|t }}</th>
            <td class="thin"></td>
        </tr>
        </thead>
        <tbody>
        {% for taxRate in taxRates %}
            <tr data-id="{{ taxRate.id }}" data-name="{{ taxRate.name }}">
                <th scope="row" data-title="Name"><a
                            href="{{ url('commerce/settings/taxrates/'~taxRate.id) }}">{{ taxRate.name }}</a></th>
                <td data-title="Rate">{{ taxRate.rateAsPercent }}</td>
                <td data-title="Include in Price?">{{ taxRate.include ? 'Yes'|t : 'No'|t }}</td>
                <td data-title="Show in Label?">{{ taxRate.showInLabel ? 'Yes'|t : 'No'|t }}</td>
                <td data-title="Tax Zone">{{ taxRate.taxZone.name }}</td>
                <td data-title="Tax Category">{{ taxRate.taxCategory.name }}</td>
                <td class="thin"><a class="delete icon" title="{{ 'Delete'|t }}" role="button"></a></td>
            </tr>
        {% endfor %}

        </tbody>
    </table>
    {% else %}
        <p>{{ 'No tax rates exist yet.'|t }}</p>
    {% endif %}
    {% if zonesExist %}
    <div class="btngroup submit first">
        <a href="{{ url('commerce/settings/taxrates/new') }}" class="btn submit">New Tax Rate</a>
    </div>
    {% else %}
        <p class="error">{{ 'No tax zones exist, create a tax zone before creating a tax rate.'|t }}</p>
    {% endif %}

{% endset %}


{% set js %}
var adminTable = new Craft.AdminTable({
tableSelector: '#taxRates',
deleteAction: 'commerce/taxRate/delete',
confirmDeleteMessage: '{{ "Are you sure you want to delete “{name}”?"|t }}'
});
{% endset %}
{% includeJs js %}